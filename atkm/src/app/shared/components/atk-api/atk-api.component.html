<!-- /**
 * ATK API Bash Component - ADVANCED VERSION
 * Full-featured bash terminal for API debugging
 *
 * Features:
 * - Editable terminal with TerminalInputDirective
 * - Complete terminal state (caret, selection, line/column tracking)
 * - Log system with typewriter effect
 * - Advanced terminal text generation
 * - Full datatable integration
 * - Event listening from state service
 *
 * @file atk-api-bash-advanced.component.ts
 * @version 2.0.0 (Advanced/Full)
 * @architecture Smart component with local state + state service integration
 */ -->

<div class="content-wrapper">
  @if (config(); as cfg) {
  @if (state(); as stt) {

  <!-- ======================= -->
  <!-- HEADER  -->
  <!-- ======================= -->

  <header class="content-header">
    <h1>{{ cfg.id }}</h1>
  </header>

  <div class="terminal-wrapper">
    <header class="terminal-header">
      <h1>{{ cfg.title }}</h1>
      <div class="terminal-details">
        <h2>{{ cfg.subtitle }}</h2>
      </div>
    </header>

    <!-- ======================= -->
    <!-- LOADING STATE -->
    <!-- ======================= -->


    @if (stt.loading) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Loading data...</p>
    </div>
    }

    <!-- ======================= -->
    <!-- ERROR STATE -->
    <!-- ======================= -->

    @if (stt.error; as errorMsg) {
    <div class="error-state">
      <atk-icon name="error-2" color="currentColor" />
      <p>{{ errorMsg }}</p>
      <button class="retry-btn" (click)="loadData()">
        Retry
      </button>
    </div>
    }

    <!-- ======================= -->
    <!-- BASH SECTION -->
    <!-- ======================= -->

    <div class="terminal-main">
      <div class="terminal-section">
        <div class="section-content">
          <atk-icon class="terminal-toggle" [size]="18" name="triangle-right" color="var(--color-btn-bg-default)" />
          <atk-api-bash />
        </div>
      </div>
    </div>
  </div>
  }
  } @else {
  <div class="terminal-wrapper">
    <div class="terminal-section">
      <div class="section-content">
        <div class="app-loading-spinner"></div>
        <div class="app-loading-text">There is no configuration on this route ..</div>
        <div class="spinner"></div>
        <p>please select another link.</p>
      </div>
    </div>
  </div>
  }
</div>

<!-- ======================= -->
<!-- SIDEBAR -->
<!-- ======================= -->
@if (state(); as stt) {
<atk-api-sidebar [isCollapsed]="stt.sidebarCollapsed" (togglePanel)="toggleSidebar()" />
}
