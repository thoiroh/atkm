<div class="atk-datatable">
  <!-- Table Header -->
  <div class="datatable-header">
    @for (column of columns(); track column.key) {
    <div class="column-header" [style.width]="column.width || 'auto'" [class]="'align-' + (column.align || 'left')"
      [ngClass]="column.cssClass">
      {{ column.label }}
      @if (column.sortable) {
      <!-- [style.width]="isLast ? 'calc(' + (column.width || 'auto') + ' + 15px)' : (column.width || 'auto')" -->
      <span class="sort-indicator">â†•</span>
      }
    </div>
    }
    <div class="scrollbar-spacer"></div>
  </div>

  <!-- Table Body -->
  @if (data().length > 0) {
  <div class="datatable-body">
    @for (row of data(); track trackByIndex($index, row)) {
    <div class="datatable-row" [class.selected]="isRowSelected(row)" (dblclick)="onRowDoubleClick(row)">
      @for (column of columns(); track column.key) {
      <div class="datatable-cell" [style.width]="column.width || 'auto'" [class]="'align-' + (column.align || 'left')"
        [ngClass]="column.cssClass">

        @switch (column.type) {
        @case ('badge') {
        <span class="badge badge-{{ row[column.key]?.toLowerCase() }}">
          {{ formatCellValue(row[column.key], column, row) }}
        </span>
        }
        @case ('boolean') {
        <span class="boolean-indicator {{ row[column.key] ? 'true' : 'false' }}">
          {{ formatCellValue(row[column.key], column, row) }}
        </span>
        }
        @default {
        {{ formatCellValue(row[column.key], column, row) }}
        }
        }
      </div>
      }
    </div>
    }
  </div>
  } @else {
  <div class="datatable-empty">
    <div class="empty-icon">ðŸ“Š</div>
    <div class="empty-text">No data available</div>
  </div>
  }
</div>
