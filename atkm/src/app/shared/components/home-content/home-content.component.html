<div class="content-wrapper">
  <!-- [class.config-collapsed]="configPanelCollapsed()" -->

  <!-- ======================= -->
  <!-- HEADER  -->
  <!-- ======================= -->

  <header class="content-header">
    <h1>home-content {{ configPanelCollapsed() }} / {{ sidebar().userContext.username }}</h1>
  </header>
  <div class="terminal-wrapper">
    <header class="terminal-header">
      @if (bashConfig(); as config) {
      <h1>{{ config.title }}</h1>
      <!-- <h1>atomeek.home.content Component</h1> -->
      <div class="terminal-details">
        <h2>{{ config.subtitle }}</h2>
        <!-- <h2>{{ sidebar().userContext.title }}</h2> -->
      </div>
      }
    </header>

    <!-- ======================= -->
    <!-- LOADING STATE -->
    <!-- ======================= -->

    @if (loading() ) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Chargement des informations du compte...</p>
    </div>
    }

    <!-- ======================= -->
    <!-- ERROR STATE -->
    <!-- ======================= -->

    @if (error()) {
    <div class="error-state">
      <atk-icon name="error-2" color="currentColor" />
      <p>{{ error() }}</p>
      <button class="retry-btn" (click)="refreshAccount()">Réessayer</button>
    </div>
    }

    <!-- ======================= -->
    <!-- BASH SECTION -->
    <!-- ======================= -->

    <div class="terminal-main">

      <div class="terminal-section">

        <div class="section-content">
          <atk-icon class="terminal-toggle" name="triangle-down" color="var(--color-btn-bg-default)" />
          <atk-bash configId="binance-debug-v2" [autoLoad]="true" />
          <!-- <atk-bash configId="binance-debug-v2" [autoLoad]="true" (configRequest)="onBashConfigRequest($event)"
            (dataLoaded)="onBashDataLoaded($event)" (errorOccurred)="onBashError($event)" /> -->
        </div>
      </div>

      <!-- ======================= -->
      <!-- INFOS SECTION -->
      <!-- ======================= -->

      <div class="terminal-section">
        <div class="infos-items">
          <div class="infos-item">
            <!-- <atk-icon name="check" color="#ef4444" [size]="24" />
            <span>Trading</span> -->
          </div>
          <div class="infos-item">
            <!-- <atk-icon name="check" color="#ef4444" [size]="24" />
            <span>Retrait</span> -->
          </div>
          <div class="infos-item">
            <!-- <atk-icon name="check" color="#ef4444" [size]="24" />
            <span>Dépôt</span> -->
          </div>
        </div>
        <div class="terminal-cmd">
          <div class="cmd-item">
            <label>Type de compte</label>
          </div>
          <div class="cmd-item">
            <label>Dernière mise à jour</label>
          </div>

        </div>
      </div>
    </div>

    <!-- ======================= -->
    <!-- TABLE SECTION -->
    <!-- ======================= -->
    @if (data().length > 0 && visibleColumns().length > 0) {
    <section class="bash-data-section">
      <div class="bash-data-content">
        <span class="bash-data-label">current endpoint</span>
        <header class="bash-data-header">
          <h1>{{ getCurrentEndpointName(sidebarState.currentEndpoint) || 'Data Results' }}</h1>
          <div class="bash-data-meta">
            <span>records: {{ data().length }} items</span>
            @if (terminalState().responseMetadata?.responseTime) {
            <span>-</span>
            <span>responseTime: {{ terminalState().responseMetadata.responseTime }}ms</span>
            }
          </div>
        </header>

        <!-- Datatable Component -->
        <atk-datatable [columns]="visibleColumns()" [data]="data()" [loading]="bashService.loading()" [error]="error()"
          (selectedRow)="onRowSelected($event)" />
      </div>
    </section>
    }

    <div class="infos-items">
      <div class="infos-item">
        <atk-icon name="check" color="var(--color-btn-bg-emphasis)" [size]="24" />
        <span>{{ data().length }} items</span>
        <!-- <span>Trading</span> -->
      </div>
      @if (terminalState().responseMetadata?.responseTime) {
      <div class="infos-item">
        <atk-icon name="check" color="var(--color-btn-bg-emphasis)" [size]="24" />
        <span>{{ terminalState().responseMetadata.responseTime }}ms</span>
        <!-- <span>Retrait</span> -->
      </div>
      }
      <div class="infos-item">
        <!-- <atk-icon name="check" color="#ef4444" [size]="24" />
        <span>Dépôt</span> -->
      </div>
    </div>

    <!-- ======================= -->
    <!-- CONTENT SECTION -->
    <!-- ======================= -->

    <div class="terminal-section">
      <div class="section-content">
        <atk-icon class="datatable-toggle" name="triangle-down" color="var(--color-btn-bg-default)" />
        <div class="infos-title">
          <h3>Content Section</h3>
        </div>
        <!-- <div class="no-balances"> -->
        <!-- <p>Aucun actif avec solde disponible</p> -->
        <!-- </div> -->
        <div class="terminal-table">
          <div class="table-header">
            <div class="header-cell left">Actif</div>
            <div class="header-cell right">Disponible</div>
            <div class="header-cell right">Bloqué</div>
            <div class="header-cell right">Total</div>
          </div>
          <div class="balance-row">
            <div class="balance-cell asset-cell">
            </div>
            <div class="balance-cell amount-cell">
            </div>
            <div class="balance-cell amount-cell">
              <!-- <span class="amount locked" [class.has-locked]="balance.locked > 0"></span> -->
            </div>
            <div class="balance-cell amount-cell total-cell">
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="cmd-text">
      <p>No account information available. Please set up your API connection.</p>
    </div>
  </div>
</div>

<!-- <atk-sidebar-config /> -->

<!-- <atk-sidebar-config [sections]="config().configPanel.sections" [isCollapsed]="config().configPanel.isCollapsed"
  (togglePanel)="toggleConfigPanel()" /> -->

<atk-sidebar-bash-config [isCollapsed]="configPanelCollapsed()" (togglePanel)="toggleConfigPanel()" />
