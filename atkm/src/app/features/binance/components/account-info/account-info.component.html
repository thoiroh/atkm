<div class="placeholder-wrapper">
  <!-- <div class="binance-account-wrapper"> -->
  <header class="placeholder-header">
    <h1>Binance Account Assets Inventory</h1>
    <div class="placeholder-details">
      <h2>Binance account information & assets inventory.</h2>
    </div>
  </header>

  <!-- <div class="copilot-section">
    <textarea class="copilot-input" placeholder="" rows="5"></textarea>
    <div class="copilot-suggestions">
      <button class="refresh-btn" (click)="refreshAccount()" [disabled]="loading()" [class.loading]="loading()">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
          <path
            d="M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z" />
        </svg>
        {{ loading() ? 'Chargement...' : 'Actualiser' }}
      </button>
    </div>
  </div> -->



  <!-- État de chargement -->
  @if (loading() && !account()) {
  <div class="loading-state">
    <div class="spinner"></div>
    <p>Chargement des informations du compte...</p>
  </div>
  }

  <!-- État d'erreur -->
  @if (error()) {
  <div class="error-state">
    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
      <path
        d="M2.343 13.657A8 8 0 1 1 13.657 2.343 8 8 0 0 1 2.343 13.657ZM6.03 4.97a.751.751 0 0 0-1.042.018.751.751 0 0 0-.018 1.042L6.94 8 4.97 9.97a.749.749 0 0 0 .326 1.275.749.749 0 0 0 .734-.215L8 9.06l1.97 1.97a.749.749 0 0 0 1.275-.326.749.749 0 0 0-.215-.734L9.06 8l1.97-1.97a.749.749 0 0 0-.326-1.275.749.749 0 0 0-.734.215L8 6.94Z" />
    </svg>
    <p>{{ error() }}</p>
    <button class="retry-btn" (click)="refreshAccount()">Réessayer</button>
  </div>
  }

  <!-- Informations du compte -->
  @if (account(); as currentAccount) {
  <div class="account-content">

    <!-- Informations générales -->
    <div class="account-info-section">
      <h2>Informations générales</h2>
      <div class="info-grid">
        <div class="info-item">
          <label>Type de compte</label>
          <span class="account-type">{{ currentAccount.accountType }}</span>
        </div>
        <div class="info-item">
          <label>Dernière mise à jour</label>
          <span class="update-time">{{ formatUpdateTime(currentAccount.updateTime) }}</span>
        </div>
      </div>
    </div>

    <!-- Permissions du compte -->
    <div class="account-permissions-section">
      <h2>Permissions</h2>
      <div class="permissions-grid">
        <div class="permission-item" [class.enabled]="currentAccount.canTrade">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path
              d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z" />
          </svg>
          <span>Trading</span>
          <span class="status">{{ currentAccount.canTrade ? 'Activé' : 'Désactivé' }}</span>
        </div>
        <div class="permission-item" [class.enabled]="currentAccount.canWithdraw">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path
              d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z" />
          </svg>
          <span>Retrait</span>
          <span class="status">{{ currentAccount.canWithdraw ? 'Activé' : 'Désactivé' }}</span>
        </div>
        <div class="permission-item" [class.enabled]="currentAccount.canDeposit">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path
              d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z" />
          </svg>
          <span>Dépôt</span>
          <span class="status">{{ currentAccount.canDeposit ? 'Activé' : 'Désactivé' }}</span>
        </div>
      </div>

      @if (currentAccount.permissions.length > 0) {
      <div class="additional-permissions">
        <h3>Permissions supplémentaires</h3>
        <div class="permission-tags">
          @for (permission of currentAccount.permissions; track permission) {
          <span class="permission-tag" [ngClass]="getPermissionClass(permission)">
            {{ permission }}
          </span>
          }
        </div>
      </div>
      }
    </div>

    <!-- Soldes des actifs -->
    <div class="account-balances-section">
      <h2>Soldes des actifs</h2>

      @if (significantBalances().length === 0) {
      <div class="no-balances">
        <p>Aucun actif avec solde disponible</p>
      </div>
      }

      @if (significantBalances().length > 0) {
      <div class="balances-table">
        <div class="table-header">
          <div class="header-cell left">Actif</div>
          <div class="header-cell right">Disponible</div>
          <div class="header-cell right">Bloqué</div>
          <div class="header-cell right">Total</div>
        </div>

        @for (balance of significantBalances(); track trackByAsset($index, balance)) {
        <div class="balance-row">
          <div class="balance-cell asset-cell">
            <span class="asset-name">{{ balance.asset }}</span>
          </div>
          <div class="balance-cell amount-cell">
            <span class="amount">{{ formatBalance(balance.free) }}</span>
          </div>
          <div class="balance-cell amount-cell">
            <span class="amount locked" [class.has-locked]="balance.locked > 0">
              {{ formatBalance(balance.locked) }}
            </span>
          </div>
          <div class="balance-cell amount-cell total-cell">
            <span class="amount total">{{ formatBalance(balance.total) }}</span>
          </div>
        </div>
        }
      </div>
      }
    </div>
  </div>
  }
</div>
