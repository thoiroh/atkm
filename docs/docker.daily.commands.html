<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>commandes docker quotidiennes vs code</title>
  <link rel="stylesheet" href="atk.docs.global.styles.css">
</head>

<body>
  <div class="document-container">
    <div class="document-wrapper">
      <div class="document-header">
        <h1 class="document-title">🐳 commandes docker quotidiennes vs code</h1>
        <p class="document-subtitle">fiche de référence pour le terminal vs code</p>
        <div class="meta-info">
          <span class="meta-item">📅 référence journalière</span>
          <span class="meta-item">💻 vs code terminal</span>
          <span class="meta-item">🔄 workflow docker</span>
        </div>
      </div>

      <div class="document-content">
        <!-- MATIN -->
        <div class="content-section">
          <h2 class="section-title"><span class="emoji-icon">🌤️</span>démarrage matin</h2>
          
          <div class="steps-container">
            <div class="steps-title">🔄 séquence d'ouverture :</div>
            <div class="code-container">
              <div class="code-block">
                <pre># 1. Aller dans le projet
cd ~/Documents/atomeek-datamatrix

# 2. Vérifier Docker Desktop
docker info

# 3. Démarrer les containers
docker-compose up -d

# 4. Vérifier que tout fonctionne
docker-compose ps</pre>
              </div>
              <button class="copy-button" onclick="copyToClipboard(this)">Copier</button>
            </div>
          </div>

          <div class="info-card">
            <h4 class="card-title">🟢 vérification rapide des urls</h4>
            <div class="card-content">
              <ul class="content-list">
                <li class="list-item"><strong>Angular :</strong> <code>http://localhost:4200</code></li>
                <li class="list-item"><strong>API PHP :</strong> <code>http://localhost:8000</code></li>
                <li class="list-item"><strong>PhpMyAdmin :</strong> <code>http://localhost:8080</code></li>
              </ul>
            </div>
          </div>
        </div>

        <!-- MILIEU DE JOURNÉE -->
        <div class="content-section">
          <h2 class="section-title"><span class="emoji-icon">🛠️</span>commandes utiles en cours de journée</h2>

          <h3 class="section-subtitle">🔍 surveillance et logs</h3>
          <div class="code-container">
            <div class="code-block">
              <pre># Voir le statut des containers
docker-compose ps

# Voir tous les logs
docker-compose logs

# Logs en temps réel pour Angular
docker-compose logs -f angular

# Logs pour PHP/Nginx
docker-compose logs -f php
docker-compose logs -f nginx</pre>
            </div>
            <button class="copy-button" onclick="copyToClipboard(this)">Copier</button>
          </div>

          <h3 class="section-subtitle">🔄 redémarrages rapides</h3>
          <div class="code-container">
            <div class="code-block">
              <pre># Redémarrer un service spécifique
docker-compose restart nginx
docker-compose restart php
docker-compose restart angular

# Redémarrer tout
docker-compose restart</pre>
            </div>
            <button class="copy-button" onclick="copyToClipboard(this)">Copier</button>
          </div>

          <h3 class="section-subtitle">🧹 nettoyage en cas de problème</h3>
          <div class="code-container">
            <div class="code-block">
              <pre># Reconstruction complète
docker-compose down
docker-compose up --build -d

# Nettoyage système Docker
docker system prune -f</pre>
            </div>
            <button class="copy-button" onclick="copyToClipboard(this)">Copier</button>
          </div>

          <h3 class="section-subtitle">🔧 accès aux containers</h3>
          <div class="code-container">
            <div class="code-block">
              <pre># Entrer dans le container PHP
docker-compose exec php bash

# Accès MySQL
docker-compose exec mysql mysql -u root -p

# Voir l'utilisation des ressources
docker stats</pre>
            </div>
            <button class="copy-button" onclick="copyToClipboard(this)">Copier</button>
          </div>
        </div>

        <!-- SOIR -->
        <div class="content-section">
          <h2 class="section-title"><span class="emoji-icon">🌙</span>arrêt soir</h2>

          <div class="steps-container">
            <div class="steps-title">🔽 séquence de fermeture :</div>
            <div class="code-container">
              <div class="code-block">
                <pre># 1. Arrêter tous les containers
docker-compose down

# 2. Vérifier l'arrêt complet
docker-compose ps

# 3. (Optionnel) Fermer Docker Desktop
# Via l'interface graphique</pre>
              </div>
              <button class="copy-button" onclick="copyToClipboard(this)">Copier</button>
            </div>
          </div>

          <div class="info-card">
            <h4 class="card-title">💡 options d'arrêt</h4>
            <div class="card-content">
              <p><strong>Arrêt simple :</strong> <code>docker-compose down</code></p>
              <p><strong>Arrêt avec suppression volumes :</strong> <code>docker-compose down -v</code></p>
              <p><strong>Arrêt avec suppression images :</strong> <code>docker-compose down --rmi all</code></p>
            </div>
          </div>
        </div>

        <!-- RACCOURCIS -->
        <div class="content-section">
          <h2 class="section-title"><span class="emoji-icon">⚡</span>raccourcis pratiques</h2>

          <h3 class="section-subtitle">🔖 alias recommandés</h3>
          <div class="code-container">
            <div class="code-block">
              <pre># À ajouter dans ~/.zshrc ou ~/.bashrc
echo 'alias atk="cd ~/Documents/atomeek-datamatrix && code ."' >> ~/.zshrc
echo 'alias dcu="docker-compose up -d"' >> ~/.zshrc
echo 'alias dcd="docker-compose down"' >> ~/.zshrc
echo 'alias dcr="docker-compose restart"' >> ~/.zshrc
echo 'alias dcl="docker-compose logs -f"' >> ~/.zshrc

# Recharger la configuration
source ~/.zshrc</pre>
            </div>
            <button class="copy-button" onclick="copyToClipboard(this)">Copier</button>
          </div>

          <h3 class="section-subtitle">🚨 dépannage rapide</h3>
          <div class="cards-grid">
            <div class="info-card">
              <h4 class="card-title">❌ "Port already in use"</h4>
              <div class="card-content">
                <div class="code-container">
                  <div class="code-block">
                    <pre># Trouver le processus
sudo lsof -i :4200
sudo lsof -i :8000

# Tuer le processus
kill -9 [PID]</pre>
                  </div>
                </div>
              </div>
            </div>

            <div class="info-card">
              <h4 class="card-title">❌ "docker: command not found"</h4>
              <div class="card-content">
                <ul class="content-list">
                  <li class="list-item">Vérifier Docker Desktop</li>
                  <li class="list-item">Redémarrer le terminal</li>
                  <li class="list-item">Relancer Docker Desktop</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="document-footer">
        <div class="footer-title">🐳 commandes docker quotidiennes</div>
        <p>fiche de référence pour le workflow vs code - atomeek datamatrix</p>
      </div>
    </div>
  </div>

  <script>
    // Fonction de copie dans le presse-papiers
    async function copyToClipboard(button) {
      const codeBlock = button.previousElementSibling;
      const code = codeBlock.innerText;

      try {
        await navigator.clipboard.writeText(code);

        // Feedback visuel
        const originalText = button.textContent;
        button.textContent = 'Copié !';
        button.style.backgroundColor = '#22c55e';

        setTimeout(() => {
          button.textContent = originalText;
          button.style.backgroundColor = '';
        }, 2000);

      } catch (err) {
        console.error('Erreur lors de la copie :', err);
        
        // Fallback pour les navigateurs plus anciens
        const textArea = document.createElement('textarea');
        textArea.value = code;
        document.body.appendChild(textArea);
        textArea.select();
        
        try {
          document.execCommand('copy');
          button.textContent = 'Copié !';
          button.style.backgroundColor = '#22c55e';
          
          setTimeout(() => {
            button.textContent = 'Copier';
            button.style.backgroundColor = '';
          }, 2000);
          
        } catch (fallbackErr) {
          button.textContent = 'Erreur';
          console.error('Erreur fallback :', fallbackErr);
        }
        
        document.body.removeChild(textArea);
      }
    }
  </script>
</body>

</html>