<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guide d'Installation Docker - ATKM</title>
  <link rel="stylesheet" href="atk.docs.global.styles.css">
</head>

<body>
  <!-- Bouton pour tout dÃ©velopper/rÃ©duire -->
  <button class="global-toggle" onclick="toggleAll()">ğŸ“‹ Tout dÃ©velopper</button>

  <div class="document-container">
    <div class="document-wrapper">

      <!-- En-tÃªte du document -->
      <div class="document-header">
        <h1 class="document-title">ğŸ³ Guide d'Installation Docker</h1>
        <div class="document-subtitle">Configuration complÃ¨te pour le projet ATKM</div>
        <div class="meta-info">
          <div class="meta-item">ğŸ“… AoÃ»t 2025</div>
          <div class="meta-item">ğŸ–¥ï¸ macOS & Windows</div>
          <div class="meta-item">ğŸ³ Docker Desktop</div>
          <div class="meta-item">âš¡ ATKM Ready</div>
        </div>
      </div>

      <!-- MÃ©tadonnÃ©es -->
      <div class="metadata-section">
        <div class="metadata-box">
          <div class="metadata-item">
            <span class="metadata-label">ğŸ“‹ Projet :</span>
            <span>ATKM - Installation Docker complÃ¨te</span>
          </div>
          <div class="metadata-item">
            <span class="metadata-label">ğŸ‘¥ DestinÃ© Ã  :</span>
            <span>DÃ©veloppeurs, Ã©quipe ATKM</span>
          </div>
          <div class="metadata-item">
            <span class="metadata-label">â±ï¸ DurÃ©e :</span>
            <span>30-45 minutes</span>
          </div>
          <div class="metadata-item">
            <span class="metadata-label">ğŸ¯ Objectif :</span>
            <span>Installation Docker opÃ©rationnelle pour ATKM</span>
          </div>
        </div>
      </div>

      <!-- Contenu principal -->
      <div class="main-content">

        <!-- Section Objectif -->
        <div class="objective-section">
          <h2 class="objective-title">ğŸ¯ Objectif</h2>
          <p>Installer et configurer Docker Desktop pour faire fonctionner l'environnement de dÃ©veloppement ATKM avec
            Angular, PHP, MySQL et tous les services associÃ©s.</p>
        </div>

        <!-- PrÃ©requis systÃ¨me -->
        <div class="content-section collapsible">
          <h2 class="section-title expandable-header" onclick="toggleSection(this)">
            <span class="expand-arrow">â–¶ï¸</span>
            <span class="emoji-icon">ğŸ’»</span>
            PrÃ©requis SystÃ¨me
          </h2>

          <div class="expandable-content">
            <div class="cards-grid">
              <div class="info-card">
                <h3 class="card-title">
                  <span class="emoji-icon">ğŸ</span>
                  macOS Requirements
                </h3>
                <div class="card-content">
                  <ul class="content-list">
                    <li class="list-item">macOS 10.15 Catalina ou supÃ©rieur</li>
                    <li class="list-item">4 GB RAM minimum (8 GB recommandÃ©)</li>
                    <li class="list-item">Processeur Intel ou Apple Silicon</li>
                    <li class="list-item">VirtualBox non installÃ© (conflits)</li>
                  </ul>
                </div>
              </div>

              <div class="info-card">
                <h3 class="card-title">
                  <span class="emoji-icon">ğŸªŸ</span>
                  Windows Requirements
                </h3>
                <div class="card-content">
                  <ul class="content-list">
                    <li class="list-item">Windows 10 version 2004+ ou Windows 11</li>
                    <li class="list-item">WSL 2 activÃ© (Windows Subsystem for Linux)</li>
                    <li class="list-item">4 GB RAM minimum (8 GB recommandÃ©)</li>
                    <li class="list-item">Virtualisation activÃ©e dans le BIOS</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Installation Docker Desktop -->
        <div class="content-section collapsible">
          <h2 class="section-title expandable-header" onclick="toggleSection(this)">
            <span class="expand-arrow">â–¶ï¸</span>
            <span class="emoji-icon">â¬‡ï¸</span>
            Installation Docker Desktop
          </h2>

          <div class="expandable-content">
            <h3 class="section-subtitle">ğŸ Installation sur macOS</h3>

            <div class="steps-container">
              <div class="steps-title">Ã‰tapes d'installation macOS :</div>
              <ol class="steps-list">
                <li class="step-item">TÃ©lÃ©charger Docker Desktop depuis
                  <strong>docker.com/products/docker-desktop</strong>
                </li>
                <li class="step-item">Choisir la version correcte (Intel ou Apple Silicon)</li>
                <li class="step-item">Double-cliquer sur le fichier <code>Docker.dmg</code></li>
                <li class="step-item">Glisser l'icÃ´ne Docker vers le dossier Applications</li>
                <li class="step-item">Lancer Docker depuis le dossier Applications</li>
                <li class="step-item">Accepter les autorisations systÃ¨me demandÃ©es</li>
              </ol>
            </div>

            <div class="alert-box alert-info">
              <strong>ğŸ’¡ Astuce macOS :</strong> Docker peut demander les privilÃ¨ges administrateur lors du premier
              lancement. C'est normal et nÃ©cessaire.
            </div>

            <h3 class="section-subtitle">ğŸªŸ Installation sur Windows</h3>

            <div class="steps-container">
              <div class="steps-title">Ã‰tapes d'installation Windows :</div>
              <ol class="steps-list">
                <li class="step-item">Activer WSL 2 si pas dÃ©jÃ  fait :
                  <div class="code-container">
                    <div class="code-block">
                      <pre>wsl --install</pre>
                    </div>
                  </div>
                </li>
                <li class="step-item">RedÃ©marrer Windows aprÃ¨s l'installation WSL</li>
                <li class="step-item">TÃ©lÃ©charger Docker Desktop depuis <strong>docker.com</strong></li>
                <li class="step-item">Lancer l'installateur en tant qu'administrateur</li>
                <li class="step-item">Cocher "Use WSL 2 instead of Hyper-V"</li>
                <li class="step-item">Suivre l'installation jusqu'au bout</li>
                <li class="step-item">RedÃ©marrer Windows</li>
              </ol>
            </div>

            <div class="alert-box alert-warning">
              <strong>âš ï¸ Attention Windows :</strong> La virtualisation doit Ãªtre activÃ©e dans le BIOS. VÃ©rifiez dans
              Gestionnaire des tÃ¢ches > Performances > Processeur que "Virtualisation" indique "ActivÃ©".
            </div>
          </div>
        </div>

        <!-- VÃ©rification installation -->
        <div class="content-section collapsible">
          <h2 class="section-title expandable-header" onclick="toggleSection(this)">
            <span class="expand-arrow">â–¶ï¸</span>
            <span class="emoji-icon">âœ…</span>
            VÃ©rification de l'Installation
          </h2>

          <div class="expandable-content">
            <div class="section-text">
              AprÃ¨s l'installation, vÃ©rifiez que Docker fonctionne correctement :
            </div>

            <div class="steps-container">
              <div class="steps-title">Tests de validation :</div>
              <ol class="steps-list">
                <li class="step-item">Ouvrir un terminal (Terminal sur macOS, PowerShell sur Windows)</li>
                <li class="step-item">VÃ©rifier la version Docker :
                  <div class="code-container">
                    <div class="code-block">
                      <pre>docker --version</pre>
                    </div>
                  </div>
                  <div class="section-text">RÃ©sultat attendu : <code class="status-success">Docker version 24.x.x</code>
                  </div>
                </li>
                <li class="step-item">VÃ©rifier Docker Compose :
                  <div class="code-container">
                    <div class="code-block">
                      <pre>docker-compose --version</pre>
                    </div>
                  </div>
                </li>
                <li class="step-item">Tester avec un conteneur simple :
                  <div class="code-container">
                    <div class="code-block">
                      <pre>docker run hello-world</pre>
                    </div>
                  </div>
                  <div class="section-text">Doit afficher un message de bienvenue Docker</div>
                </li>
              </ol>
            </div>
          </div>
        </div>

        <!-- Configuration pour ATKM -->
        <div class="content-section collapsible">
          <h2 class="section-title expandable-header" onclick="toggleSection(this)">
            <span class="expand-arrow">â–¶ï¸</span>
            <span class="emoji-icon">âš™ï¸</span>
            Configuration pour ATKM
          </h2>

          <div class="expandable-content">
            <div class="section-text">
              Maintenant que Docker est installÃ©, configurons l'environnement ATKM :
            </div>

            <h3 class="section-subtitle">ğŸ“ Structure du projet</h3>
            <div class="code-container">
              <div class="code-block">
                <pre>ğŸ“ atkm_project/
â”œâ”€â”€ ğŸ“ atkm/              (Frontend Angular)
â”œâ”€â”€ ğŸ“ atkm_back/         (Backend PHP)
â”œâ”€â”€ ğŸ“ docker/            (Configuration Docker)
â”œâ”€â”€ ğŸ“ database/          (Scripts SQL)
â”œâ”€â”€ ğŸ“„ docker-compose.yml
â”œâ”€â”€ ğŸ“„ .env
â”œâ”€â”€ ğŸ“„ setup-macos.sh
â””â”€â”€ ğŸ“„ setup-windows.ps1</pre>
              </div>
            </div>

            <h3 class="section-subtitle">ğŸš€ Lancement rapide</h3>

            <div class="cards-grid">
              <div class="info-card">
                <h4 class="card-title">
                  <span class="emoji-icon">ğŸ</span>
                  Sur macOS
                </h4>
                <div class="card-content">
                  <div class="code-container">
                    <div class="code-block">
                      <pre># Rendre le script exÃ©cutable
chmod +x setup-macos.sh

# Lancer l'installation
./setup-macos.sh</pre>
                    </div>
                  </div>
                </div>
              </div>

              <div class="info-card">
                <h4 class="card-title">
                  <span class="emoji-icon">ğŸªŸ</span>
                  Sur Windows
                </h4>
                <div class="card-content">
                  <div class="code-container">
                    <div class="code-block">
                      <pre># Dans PowerShell
.\setup-windows.ps1</pre>
                    </div>
                    <div class="code-container">
                      <div class="code-block">
                        <pre># Dans PowerShell exÃ©cutez le script en contournant temporairement la politique ExecutionPolicy
PowerShell -ExecutionPolicy Bypass -File .\setup-windows.ps1</pre>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="alert-box alert-success">
              <strong>âœ… RÃ©sultat attendu :</strong> Les scripts configurent automatiquement l'environnement, crÃ©ent les
              conteneurs et installent les dÃ©pendances.
            </div>
          </div>
        </div>

        <!-- Services ATKM -->
        <div class="content-section collapsible">
          <h2 class="section-title expandable-header" onclick="toggleSection(this)">
            <span class="expand-arrow">â–¶ï¸</span>
            <span class="emoji-icon">ğŸ”—</span>
            Services ATKM Disponibles
          </h2>

          <div class="expandable-content">
            <div class="entities-grid">
              <div class="entity-card">
                <h4>ğŸ…°ï¸ Angular Frontend</h4>
                <p><strong>http://localhost:4200</strong></p>
                <p>Interface utilisateur principale</p>
              </div>
              <div class="entity-card">
                <h4>ğŸŒ API PHP Backend</h4>
                <p><strong>http://localhost:8000</strong></p>
                <p>Services API et logique mÃ©tier</p>
              </div>
              <div class="entity-card">
                <h4>ğŸ¬ PhpMyAdmin</h4>
                <p><strong>http://localhost:8080</strong></p>
                <p>Interface de gestion MySQL</p>
              </div>
              <div class="entity-card">
                <h4>ğŸ”´ Redis Cache</h4>
                <p><strong>localhost:6379</strong></p>
                <p>Cache et sessions</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Commandes utiles -->
        <div class="content-section collapsible">
          <h2 class="section-title expandable-header" onclick="toggleSection(this)">
            <span class="expand-arrow">â–¶ï¸</span>
            <span class="emoji-icon">âŒ¨ï¸</span>
            Commandes Docker Utiles
          </h2>

          <div class="expandable-content">
            <div class="cards-grid">
              <div class="info-card">
                <h4 class="card-title">ğŸ DÃ©marrage</h4>
                <div class="card-content">
                  <div class="code-container">
                    <div class="code-block">
                      <pre># DÃ©marrer tous les services
docker-compose up -d

# Voir les logs en temps rÃ©el
docker-compose logs -f</pre>
                    </div>
                  </div>
                </div>
              </div>

              <div class="info-card">
                <h4 class="card-title">ğŸ” Surveillance</h4>
                <div class="card-content">
                  <div class="code-container">
                    <div class="code-block">
                      <pre># Ã‰tat des conteneurs
docker-compose ps

# Statistiques d'utilisation
docker stats</pre>
                    </div>
                  </div>
                </div>
              </div>

              <div class="info-card">
                <h4 class="card-title">ğŸ›‘ ArrÃªt</h4>
                <div class="card-content">
                  <div class="code-container">
                    <div class="code-block">
                      <pre># ArrÃªter les services
docker-compose stop

# ArrÃªter et supprimer
docker-compose down</pre>
                    </div>
                  </div>
                </div>
              </div>

              <div class="info-card">
                <h4 class="card-title">ğŸ”§ Maintenance</h4>
                <div class="card-content">
                  <div class="code-container">
                    <div class="code-block">
                      <pre># Reconstruire les images
docker-compose build --no-cache

# Nettoyer les images inutilisÃ©es
docker system prune</pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- DÃ©pannage -->
        <div class="content-section collapsible">
          <h2 class="section-title expandable-header" onclick="toggleSection(this)">
            <span class="expand-arrow">â–¶ï¸</span>
            <span class="emoji-icon">ğŸ”§</span>
            DÃ©pannage Courant
          </h2>

          <div class="expandable-content">
            <h3 class="section-subtitle">âŒ ProblÃ¨mes frÃ©quents</h3>

            <div class="cards-grid">
              <div class="info-card">
                <h4 class="card-title">ğŸš« Port dÃ©jÃ  utilisÃ©</h4>
                <div class="card-content">
                  <p><strong>Erreur :</strong> Port 3306, 4200, 8000 dÃ©jÃ  utilisÃ©</p>
                  <p><strong>Solution :</strong></p>
                  <div class="code-container">
                    <div class="code-block">
                      <pre># Trouver le processus
lsof -i :3306    # macOS/Linux
netstat -ano | findstr :3306    # Windows

# ArrÃªter XAMPP/MAMP si nÃ©cessaire</pre>
                    </div>
                  </div>
                </div>
              </div>

              <div class="info-card">
                <h4 class="card-title">ğŸ’¾ Erreur de permissions</h4>
                <div class="card-content">
                  <p><strong>Erreur :</strong> Permission denied, volumes</p>
                  <p><strong>Solution macOS :</strong></p>
                  <div class="code-container">
                    <div class="code-block">
                      <pre>sudo chmod -R 755 atkm_back/
sudo chown -R $(whoami) atkm_back/</pre>
                    </div>
                  </div>
                </div>
              </div>

              <div class="info-card">
                <h4 class="card-title">ğŸ³ Docker ne dÃ©marre pas</h4>
                <div class="card-content">
                  <p><strong>Solution :</strong></p>
                  <ul class="content-list">
                    <li class="list-item">RedÃ©marrer Docker Desktop</li>
                    <li class="list-item">VÃ©rifier les ressources (RAM, CPU)</li>
                    <li class="list-item">Nettoyer : <code>docker system prune -a</code></li>
                  </ul>
                </div>
              </div>

              <div class="info-card">
                <h4 class="card-title">ğŸ”„ Conteneur en Ã©chec</h4>
                <div class="card-content">
                  <p><strong>Diagnostic :</strong></p>
                  <div class="code-container">
                    <div class="code-block">
                      <pre># Voir les logs dÃ©taillÃ©s
docker-compose logs atkm_mysql
docker-compose logs atkm_php

# RedÃ©marrer un service
docker-compose restart atkm_mysql</pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Prochaines Ã©tapes -->
        <div class="next-steps-section">
          <h2 class="next-steps-title">
            <span class="emoji-icon">ğŸ¯</span>
            Prochaines Ã‰tapes
          </h2>

          <h3>1. VÃ©rification complÃ¨te</h3>
          <ul class="content-list">
            <li class="list-item">Tester tous les services sur leurs ports respectifs</li>
            <li class="list-item">VÃ©rifier la connexion Ã  la base de donnÃ©es via PhpMyAdmin</li>
            <li class="list-item">S'assurer que Angular compile sans erreur</li>
          </ul>

          <h3>2. Configuration finale</h3>
          <ul class="content-list">
            <li class="list-item">Ajuster le fichier <code>.env</code> selon vos besoins</li>
            <li class="list-item">Configurer VS Code avec le workspace ATKM</li>
            <li class="list-item">Importer les schÃ©mas de base de donnÃ©es</li>
          </ul>

          <h3>3. DÃ©veloppement</h3>
          <ul class="content-list">
            <li class="list-item">Commencer par le module IDENTITÃ‰S</li>
            <li class="list-item">Tester la communication Angular â†” PHP</li>
            <li class="list-item">ImplÃ©menter les 4 entitÃ©s atomiques ATKM</li>
          </ul>
        </div>

      </div>

      <!-- Pied de page -->
      <div class="document-footer">
        <div class="footer-title">ğŸ³ Docker ATKM - Installation ComplÃ¨te</div>
        <p>Environnement de dÃ©veloppement prÃªt pour Angular + PHP + MySQL</p>
      </div>

    </div>
  </div>

  <script>
    // Variables globales
    let allExpanded = false;

    // Fonction pour basculer une section individuelle
    function toggleSection(headerElement) {
      const section = headerElement.parentElement;
      const content = section.querySelector('.expandable-content');
      const arrow = headerElement.querySelector('.expand-arrow');

      if (content.classList.contains('collapsed')) {
        // DÃ©velopper
        content.classList.remove('collapsed');
        section.classList.remove('collapsed');
        arrow.classList.add('expanded');
        arrow.textContent = 'â–¶';
      } else {
        // RÃ©duire
        content.classList.add('collapsed');
        section.classList.add('collapsed');
        arrow.classList.remove('expanded');
        arrow.textContent = 'â–¶';
      }
    }

    // Fonction pour basculer toutes les sections
    function toggleAll() {
      const sections = document.querySelectorAll('.content-section.collapsible');
      const toggleButton = document.querySelector('.global-toggle');

      sections.forEach(section => {
        const header = section.querySelector('.expandable-header');
        const content = section.querySelector('.expandable-content');
        const arrow = header.querySelector('.expand-arrow');

        if (allExpanded) {
          // Tout rÃ©duire
          content.classList.add('collapsed');
          section.classList.add('collapsed');
          arrow.classList.remove('expanded');
          arrow.textContent = 'â–¶';
        } else {
          // Tout dÃ©velopper
          content.classList.remove('collapsed');
          section.classList.remove('collapsed');
          arrow.classList.add('expanded');
          arrow.textContent = 'â–¶';
        }
      });

      allExpanded = !allExpanded;
      toggleButton.textContent = allExpanded ? 'ğŸ“‹ Tout rÃ©duire' : 'ğŸ“‹ Tout dÃ©velopper';
    }

    // Initialisation au chargement de la page
    document.addEventListener('DOMContentLoaded', function () {
      // RÃ©duire toutes les sections au chargement
      const sections = document.querySelectorAll('.content-section.collapsible');
      sections.forEach(section => {
        const content = section.querySelector('.expandable-content');
        const arrow = section.querySelector('.expand-arrow');

        content.classList.add('collapsed');
        section.classList.add('collapsed');
        arrow.textContent = 'â–¶';
      });

      // Ajouter des boutons de copie aux blocs de code
      const codeBlocks = document.querySelectorAll('.code-block');

      codeBlocks.forEach((block, index) => {
        const container = block.parentElement;
        if (!container.querySelector('.copy-button')) {
          const copyBtn = document.createElement('button');
          copyBtn.className = 'copy-button';
          copyBtn.textContent = 'copy';
          copyBtn.onclick = function () {
            const code = block.textContent.trim();
            navigator.clipboard.writeText(code).then(() => {
              copyBtn.textContent = 'copied';
              copyBtn.classList.add('copied');
              setTimeout(() => {
                copyBtn.textContent = 'copy';
                copyBtn.classList.remove('copied');
              }, 2000);
            });
          };
          container.appendChild(copyBtn);
        }
      });
    });

    // Raccourci clavier pour tout dÃ©velopper/rÃ©duire (Ctrl + E)
    document.addEventListener('keydown', function (e) {
      if (e.ctrlKey && e.key === 'e') {
        e.preventDefault();
        toggleAll();
      }
    });
  </script>

</body>

</html>
